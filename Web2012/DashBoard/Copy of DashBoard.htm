<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="../Styles/jquery-ui.css" rel="stylesheet" />
    <script type="text/javascript" src="../Scripts/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="../Scripts/jquery-ui.js"></script>
    <link href="../Styles/layout.css" rel="stylesheet" />
    <!-- lior test it from other computers!!!!-->
    <script>
        var dropBox;
        var drag;   
        var maxEventsInMonth = 10;
        var maxDataRow = 6;
        var dragClone;
        var dragElement = false;

        var events = [{ id: '1', name: 'Event1', icon: 'http://yeeeah.com/wp-content/uploads/2012/12/88116PCN_WillKate10.jpg', duedate: 'date1', responsible: 'ABC1', conditions: 'Cond-1', status: 'Pedning' },
                { id: '2', name: 'Event2', icon: 'http://yeeeah.com/wp-content/uploads/2012/12/88116PCN_WillKate11.jpg', duedate: 'date2', responsible: 'DEF2', conditions: 'Cond-2', status: 'Completed' },
                { id: '3', name: 'Event3', icon: 'http://yeeeah.com/wp-content/uploads/2012/12/88116PCN_WillKate12.jpg', duedate: 'date3', responsible: 'LMN3', conditions: 'Cond-3', status: 'Pedning' },
                { id: '4', name: 'Event4', icon: 'http://yeeeah.com/wp-content/uploads/2012/12/88116PCN_WillKate13.jpg', duedate: 'date4', responsible: 'PQR4', conditions: 'Cond-4', status: 'Pedning' },
                { id: '5', name: 'Event5', icon: 'http://yeeeah.com/wp-content/uploads/2012/12/88116PCN_WillKate14.jpg', duedate: 'date5', responsible: 'CDE5', conditions: 'Cond-5', status: 'In Progress' },
                { id: '6', name: 'Event6', icon: 'http://yeeeah.com/wp-content/uploads/2012/12/88116PCN_WillKate15.jpg', duedate: 'date6', responsible: 'XYZ6', conditions: 'Cond-6', status: 'Pedning' }
        ];
        $(function () {
            dropBox = $('.drop');drag = $('#drag');

            $.each(events, function (index, event) {
                drag.append('<li style="width:100px;height:20px" id=event_' + event.id + '>' + event.name+'</li>');
            });

            $('#drag li').draggable({
                revert: "invalid",
                appendTo: 'body',
                containment: 'window',
                scroll: false,
                helper: 'clone',
                cursor: "move",
                start: function () {
                   // $(this).hide();
                    dragClone = $(this).clone();
                    dragElement = $(this);
                },
                stop: function () {
                   // $(this).show()
                }
            });

            var zIndex=5000;
            dropBox.droppable({
                accept: "#drag li",
                scroll: true,
                drop: function (event, ui) {

                    //var pos1 = ui.draggable.position();
                    //var pos2 = dragElement.position();
                    //var pos3 = dragClone.position();
                    //    alert('top: ' + pos2.top+ ', left: ' + pos2.left); 

                    var eWidth = ui.draggable.outerWidth();
                    var eHeight = ui.draggable.outerHeight();
                    var mWidth = $(this).outerWidth();

                    var x = event.pageX - $(this).offset().left;
                    var y = event.pageY - $(this).offset().top;
                 //   $('<div style="margin-top:' + y + 'px; margin-left:' + x + 'px; "></div>').html(ui.draggable.html()).appendTo(this);

                    var left = x + "px";
                    var top =y + "px";
                    //show the menu directly over the placeholder  
                    //ui.draggable.css({
                    //    position: 'relative',
                    //    zIndex: 5000,
                    //    left: left,
                    //    top: top
                    //});
                    //absolute
                    //dragClone.css({
                    //    position: 'fixed',
                    //    zIndex: zIndex++,
                    //    left: left,
                    //    top: top,
                    //    width: 35+ "px"
                    //});
                    dragClone.draggable();

                    // $('.drop').append( ui.draggable.clone());
                    dragClone.appendTo(this);

                   
                   // ui.draggable.clone().appendTo('.drop');
                  //  dragElement.appendTo(this);
                   // $(this).html(dragElement.html());
                     //   $(this).html(dragElement[0].innerHTML);
                    dragElement.remove();
                    // // handleDrop($(this), event, ui);
                   // appendTo(this).remove();
                  //  ui.draggable.remove();


                    return true;
                }
            });
        });
    </script>
</head>
<body>
    <!--
 background-image :url('/imgs/A4.png'); 
  width:210mm; height: 297mm;

A4	210 × 297 MM	8.27 × 11.69 INCH
-->
    <div class="header"></div>
    <div class="centreposition">
        <div class="left">
                       <ul id="drag"></ul>
        </div>
        <div class="Screen centrecontent">
          
            <div class="drop Issue">  <div style="top:450px;left:300px">xxxx</div></div>
        </div>
    </div>
    <div class="footer">Footer - This is the footer.</div>

</body>
</html>
